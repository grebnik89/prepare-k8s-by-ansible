# k8s-cluster

### Проект для подготовки и развертывания кластера k8s на вм.

Для работы необходимо: 
1. Развернуть от 1 вм для для мастер ноды и от 2х вм для воркер нод, получить IP адреса, прописать в inventory
2. На каждой ноде создать пользователя ansible и настроить ssh подключение
3. Проверить доступность с помощью ping

ps: проверить работу DNS, в случае некорректного резолвинга - исправить. В моем случае, для KVM/libvirt нужно выполнить задачу с тэгом debug_fix и/или передать переменную "fix_dns=true"

### Что происходит после запуска playbook:

1. Отключение swap (roles/swap_disable)
2. Container Runtime установка (roles/container_runtime), необходимо передать переменную "fix_dns=true"
3. Kubeadm, kubectl, kubelet установка (roles/kube_components), необходимо передать переменную "fix_dns=true"